CREATE FOLDER {dim.spectest} VISUAL(TITLE "Spectest") TYPE ATTRIBUTE;
CREATE FOLDER {ff.spectest} VISUAL(TITLE "Spectest") TYPE FACT;

CREATE ATTRIBUTE {attr.spectest_record} VISUAL(TITLE "Spectests record", FOLDER {dim.spectest})
  AS KEYS {tab_spectest.id} PRIMARY;

CREATE ATTRIBUTE {attr.first_in_day} VISUAL(TITLE "Spectests first in day", FOLDER {dim.spectest})
  AS KEYS {tab_first_id_day.id} PRIMARY, {tab_spectest.fk_first_in_day_id};

CREATE FACT {fact.spectest.pass} VISUAL(TITLE "Spectests pass", FOLDER {ff.spectest}) AS {tab_spectest.pass};
CREATE FACT {fact.spectest.fail} VISUAL(TITLE "Spectests fail", FOLDER {ff.spectest}) AS {tab_spectest.fail};
CREATE FACT {fact.spectest.todo} VISUAL(TITLE "Spectests todo", FOLDER {ff.spectest}) AS {tab_spectest.todo};
CREATE FACT {fact.spectest.skip} VISUAL(TITLE "Spectests skip", FOLDER {ff.spectest}) AS {tab_spectest.skip};
CREATE FACT {fact.spectest.plan} VISUAL(TITLE "Spectests plan", FOLDER {ff.spectest}) AS {tab_spectest.plan};
CREATE FACT {fact.spectest.spec} VISUAL(TITLE "Spectests spec", FOLDER {ff.spectest}) AS {tab_spectest.spec};
CREATE FACT {fact.spectest.files} VISUAL(TITLE "Spectests files", FOLDER {ff.spectest}) AS {tab_spectest.files};

CREATE DATASET {dataset.spectests} VISUAL(TITLE "Spectests");
ALTER DATASET {dataset.spectests}
  ADD {attr.spectest_record}, {attr.first_in_day},
      {fact.spectest.pass}, {fact.spectest.fail}, {fact.spectest.todo},
      {fact.spectest.skip}, {fact.spectest.plan}, {fact.spectest.spec},
      {fact.spectest.files};

ALTER ATTRIBUTE {attr.commit_record} ADD KEYS {tab_spectest.fk_project_flavour};

SYNCHRONIZE {dataset.spectests};



